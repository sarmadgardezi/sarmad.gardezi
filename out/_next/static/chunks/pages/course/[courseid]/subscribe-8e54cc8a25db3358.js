(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{4560:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/course/[courseid]/subscribe",function(){return n(7318)}])},7318:function(e,r,n){"use strict";n.r(r),n.d(r,{__N_SSG:function(){return O},default:function(){return S}});var t,s=n(5893),i=n(8527),o=n(4051),c=n.n(o),a=n(7294),u=n(1604),l=n(9116),f=n(5193),d=n(894),h=n(3854),m=n(8100);function p(e,r,n,t,s,i,o){try{var c=e[i](o),a=c.value}catch(u){return void n(u)}c.done?r(a):Promise.resolve(a).then(t,s)}function b(e){return function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function o(e){p(i,t,s,o,c,"next",e)}function c(e){p(i,t,s,o,c,"throw",e)}o(void 0)}))}}function x(e,r){return v.apply(this,arguments)}function v(){return(v=b(c().mark((function e(r,n){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(r,n);case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Success=2]="Success",e[e.Error=3]="Error"}(t||(t={}));var g=n(4085),j=n(9321);function y(e,r,n,t,s,i,o){try{var c=e[i](o),a=c.value}catch(u){return void n(u)}c.done?r(a):Promise.resolve(a).then(t,s)}var w=function(e){var r=e.course,n=r.formId,o=r.title,p=(0,a.useState)({state:t.Initial}),b=p[0],v=p[1],w=(0,m.ZP)("/api/courses/subscribers/".concat(n),x).data,O=function(){var e,r=(e=c().mark((function e(r){var s,i,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),v({state:t.Loading}),e.next=4,fetch("/api/courses/subscribe/".concat(n),{body:JSON.stringify({email:r.currentTarget.elements.email.value}),headers:{"Content-Type":"application/json"},method:"POST"});case 4:return s=e.sent,e.next=7,s.json();case 7:if(i=e.sent,o=i.error,a=i.message,!o){e.next=13;break}return v({state:t.Error,message:o}),e.abrupt("return");case 13:v({state:t.Success,message:a});case 14:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,s){var i=e.apply(r,n);function o(e){y(i,t,s,o,c,"next",e)}function c(e){y(i,t,s,o,c,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,s.jsxs)(i.gC,{alignItems:"flex-start",w:"full",p:{base:4,md:6},bg:"gray.50",_dark:{bg:"gray.700"},rounded:"md",spacing:3,children:[(0,s.jsx)(i.X6,{size:"md",children:"Subscribe to my course \ud83e\udd13"}),(0,s.jsxs)(i.xv,{children:['Get notified when I publish my "',o,'" course! I will just send out one email when the course launches, and then delete your email from the list. No further bothering, no spam. I promise.']}),b.state!==t.Success&&b.state!==t.Error&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.m$.form,{name:"subscribe-form",target:"_blank",w:"full",onSubmit:O,children:(0,s.jsxs)(l.BZ,{w:"full",children:[(0,s.jsx)(l.II,{disabled:b.state===t.Loading,name:"email",placeholder:"email@example.com",type:"email",variant:"filled"}),(0,s.jsx)(l.xH,{children:(0,s.jsx)(f.hU,{"aria-label":"Subscribe",icon:(0,s.jsx)(d.JO,{as:h.Zuw}),isLoading:b.state===t.Loading,name:"subscribe",size:"sm",type:"submit"})})]})}),(0,s.jsxs)(i.xv,{color:"gray.500",fontSize:"sm",_dark:{color:"gray.400"},children:["Join ",null===w||void 0===w?void 0:w.count,"+ subscribers"]})]}),b.state===t.Success&&(0,s.jsx)(i.xv,{color:"green.500",size:"sm",children:b.message}),b.state===t.Error&&(0,s.jsxs)(i.xv,{color:"red.500",size:"sm",children:[b.message," \ud83d\ude15 Reach out to me on"," ",(0,s.jsx)(g.Z,{href:j.Cx,isExternal:!0,children:"Twitter"})," ","about this."]})]})},O=!0,S=function(e){var r=e.course;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.gC,{as:"section",alignItems:"flex-start",w:"full",spacing:3,children:[(0,s.jsx)(i.X6,{size:"md",children:r.title}),(0,s.jsxs)(i.xv,{alignSelf:"flex-start",color:"gray.500",fontSize:"sm",children:["Expected launch: ",r.expectedLaunch]}),(0,s.jsx)(i.xv,{children:r.description})]}),(0,s.jsx)(w,{course:r})]})}},4085:function(e,r,n){"use strict";var t=n(5893),s=n(1664),i=n.n(s),o=n(8527);function c(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){c(e,r,n[r])}))}return e}function u(e,r){if(null==e)return{};var n,t,s=function(e,r){if(null==e)return{};var n,t,s={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(s[n]=e[n]);return s}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}r.Z=function(e){var r=e.href,n=e.children,s=u(e,["href","children"]);return(0,t.jsx)(i(),{href:r,passHref:!0,children:(0,t.jsx)(o.rU,a({},s,{color:"purple.500",children:n}))})}}},function(e){e.O(0,[556,100,774,888,179],(function(){return r=4560,e(e.s=r);var r}));var r=e.O();_N_E=r}]);